{"version":3,"sources":["app.js","custom.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACllBA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["(function(){\r\n'use strict';\r\nvar app=angular.module('Bella');\r\n\r\n//Template service\r\napp.factory('Templates',function(){\r\n\treturn {\r\n\t\tnoticeDescription:function(actions){\r\n\t\t\treturn function(notice){\r\n\t\t\t\tvar filter={},template=(actions&&actions[notice.action_type_id]&&actions[notice.action_type_id].notice_template)||[];\r\n\t\t\t\ttemplate.match(/\\[[^\\]]+\\]/g).forEach(function(value){\r\n\t\t\t\t\tfilter[value.replace(/\\[|\\]/g,'')]=value;\r\n\t\t\t\t});\r\n\t\t\t\tfor(var item in filter)\r\n\t\t\t\t\ttemplate=template.replace(filter[item],notice[item]||item);\r\n\t\t\t\treturn template;\r\n\t\t\t};\r\n\t\t},\r\n\t\tnoticeLink:function(actions){\r\n\t\t\treturn function(notice){\r\n\t\t\t\tvar link=(actions&&actions[notice.action_type_id]&&actions[notice.action_type_id].link)||'';\r\n\t\t\t\treturn link.replace('source_id',notice.source_id);\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n});\r\n\r\n// Auto Complete Busqueda general\r\napp.controller('AutoCompleteCtrl', function($scope,$http,$location) {\r\n\r\n\t//Envia formulario\r\n\t$scope.selectedItem = function(result){\r\n\r\n\t\tif (result.kind === 'suggestions') {\r\n\r\n\t\t\twindow.location = '/products/'+result.originalObject.id;\r\n\r\n\t\t}else if(result.kind === 'categories'){\r\n\r\n\t\t\tvar filter = {\"categories\":{\"name\":result.title,\"id\":result.originalObject.id}};\r\n\t\t\t$location.search('refine','['+JSON.stringify(filter)+']');\r\n\t\t\t$location.path('/products/');\r\n            window.location = $location.absUrl();\r\n\r\n\t\t}else{\r\n\r\n\t\t\t$('#searchForm').submit();\r\n\r\n\t\t}\r\n\t};\r\n});\r\n\r\napp.controller('AutoCompleteGroupCtrl', function($scope, $http, notify, $compile) {\r\n\r\n\t$scope.selectedItem = function(result){\r\n\r\n\t   $http.post(\r\n\t\t\t'productsGroup',\r\n\t\t\t{ignoreLoadingBar : true,\r\n\t\t\t group : $('#group_id').val(),\r\n\t\t\t id : result.originalObject.id}\r\n\t\t).success(function(data){\r\n\r\n\t\t\tif(data.price!==undefined){\r\n\r\n\t\t\t\tvar row = $('#group_id').val()+'_'+result.originalObject.id;\r\n\r\n\t\t\t\tvar html='<tr id=\"product_'+row+'\">'+\r\n\t\t\t\t          '<th scope=\"row\">'+result.originalObject.id+'</th>'+\r\n\t\t\t\t          '<td>'+result.title+'</td>'+\r\n\t\t\t\t          '<td>'+data.price+'</td>'+\r\n\t\t\t\t          '<td>'+\r\n\t\t\t\t          \t'<button class=\"btn btn-danger btn-sm\" ng-click=\"deleteFromGroup(\\''+row+'\\')\">'+\r\n\t\t\t\t          \t\t data.label_delete+'&nbsp;<span class=\"glyphicon glyphicon-trash\"></span>'+\r\n\t\t\t\t          \t'</button>'+\r\n\t\t\t\t          '</td>'+\r\n\t\t\t\t        '</tr>';\r\n\r\n\t\t\t\t$('.grouped_list').append(html);\r\n\t\t\t\t$compile($('.grouped_list'))($scope);\r\n\t\t\t\t$('#searchGroup_value').val('');\r\n\t\t\t\tnotify({duration:5000, messageTemplate: '<p>'+data.message+'!</p>', classes:'alert alert-success'});\r\n\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t};\r\n});\r\n\r\napp.controller('listGroupCtrl', function($scope, $http, notify) {\r\n\r\n\t$scope.deleteFromGroup = function(id){\r\n\r\n\t   $http.delete('productsGroup/'+id, {ignoreLoadingBar : true})\r\n\t   \t\t.success(function(data){\r\n\r\n\t\t\tif(data.deleteAll){\r\n\r\n\t\t\t\t$('.grouped_list').html('');\r\n\r\n\t\t\t}else{\r\n\r\n\t\t\t\t$(\"#product_\"+id).remove();\r\n\t\t\t}\r\n\t\t\tnotify({duration:5000, messageTemplate: '<p>'+data.message+'!</p>', classes:'alert alert-success'});\r\n\t\t});\r\n\t};\r\n});\r\n\r\n//Dialogos Modales\r\napp.controller('ModalCtrl', function($scope, $uibModal){\r\n\tvar modalInstance = null;\r\n\t$scope.data = {};\r\n\t$scope.modalOpen = function (opts) {\r\n\t\tif( opts.resolve === '' || opts.resolve === null ){\r\n\t\t\topts.resolve = 'data';\r\n\r\n\t\t}\r\n\r\n\t\tvar obj= {},literal = opts.resolve;\r\n\t\tobj[literal] = function (){ return $scope.data; };\r\n\r\n\t\tvar modalInstance = $uibModal.open({\r\n\r\n\t\t\ttemplateUrl: opts.templateUrl+(opts.noCache?'?'+Math.random():'') || null,\r\n\r\n\t\t\ttemplate: opts.template || null,\r\n\r\n\t\t\tcontroller: opts.controller,\r\n\r\n\t\t\tsize: opts.size || 'lg',\r\n\r\n\t\t\tresolve: obj\r\n\t\t});\r\n\r\n\t};\r\n})\r\n.directive('stopEvent', function () {\r\n\treturn {\r\n\t\trestrict: 'A',\r\n\t\tlink: function (scope, element, attr) {\r\n\t\t\telement.on(attr.stopEvent, function (e) {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n});\r\n//control para notificaciones de menu (push)\r\napp.controller('PushNoticesController',\r\n['$scope','$http','$timeout','Templates',function($scope,$http,$timeout,Templates){\r\n\tvar loop,ajax,$t;\r\n\tvar actions={};\r\n\t$scope.getDesc=Templates.noticeDescription(actions);\r\n\t$scope.getLink=Templates.noticeLink(actions);\r\n\tvar repeat=function(){\r\n\t\t\tif(angular.isDefined(ajax)) return;\r\n\t\t\tloop=true;\r\n\t\t\tajax=$http.get(\r\n\t\t\t\t'/user/notices'+($scope.date===undefined?'':'?date='+$scope.date), {ignoreLoadingBar: true}\r\n\t\t\t).success(function(data){\r\n\t\t\t\t$scope.push=data.push;\r\n\t\t\t\t$scope.date=data.date;\r\n\t\t\t\tif(data.notices&&data.notices.length)\r\n\t\t\t\t\t$scope.notices=data.notices;\r\n\t\t\t\tif(data.action_types){\r\n\t\t\t\t\tactions=data.action_types;\r\n\t\t\t\t\t$scope.getDesc=Templates.noticeDescription(actions);\r\n\t\t\t\t\t$scope.getLink=Templates.noticeLink(actions);\r\n\t\t\t\t}\r\n\t\t\t}).finally(function(){\r\n\t\t\t\tajax=undefined;\r\n\t\t\t\t//llamado ajax periodicamente\r\n\t\t\t\tif(loop) $t=$timeout(function(){ repeat(); },5000);\r\n\t\t\t});\r\n\t\t},\r\n\t\tcheck=function(notice){\r\n\t\t\tif(\r\n\t\t\t\t$scope.date===undefined ||\r\n\t\t\t\t(notice&&notice.status=='read') ||\r\n\t\t\t\t(!notice&&$('#push-notices').hasClass('open'))\r\n\t\t\t) return;\r\n\t\t\tvar id=notice&&notice.id;\r\n\t\t\tif(id) console.log('check notice '+id);\r\n\t\t\t$scope.push=0;\r\n\t\t\t$http.get(\r\n\t\t\t\t'/user/notices/check/'+(id||'')+'?date='+$scope.date,\r\n\t\t\t\t{ignoreLoadingBar: true}\r\n\t\t\t).success(function(data){\r\n\t\t\t\t//if checking a notice, redirect to the link\r\n\t\t\t\tif(id) document.location=$scope.getLink(notice);\r\n\t\t\t\t$scope.push=data.push;\r\n\t\t\t\t$scope.date=data.date;\r\n\t\t\t\tif(data.notices&&data.notices.length)\r\n\t\t\t\t\t$scope.notices=data.notices;\r\n\t\t\t});\r\n\t\t},\r\n\t\tstart=function(){\r\n\t\t\tif(loop) return;\r\n\t\t\trepeat();\r\n\t\t},\r\n\t\tstop=function(){\r\n\t\t\tif(loop) loop=false;\r\n\t\t};\r\n\t$scope.repeat=repeat;\r\n\t$scope.start=start;\r\n\t$scope.stop=stop;\r\n\t$scope.$on('$destroy',function(){\r\n\t\t$scope.stop();\r\n\t});\r\n\t$scope.date=undefined;\r\n\t$scope.push=undefined;\r\n\t$scope.count=0;\r\n\t$scope.notices=[];\r\n\t$scope.check=check;\r\n\t$(function(){\r\n\t\t//if click a notice not read, stop link function and execute ng-click\r\n\t\t$('#push-notices').off('.notice').on('click.notice','ul>li.new>a,ul>li.unread>a',function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\treturn false;\r\n\t\t});\r\n\t});\r\n\tstart();\r\n}]);\r\n//control para vista de notificaciones\r\n\r\n//Control de login\r\napp.controller('LoginController',['$scope','$http',function($scope, $http){\r\n\t$scope.havePassword = true;\r\n\r\n\t$scope.setHavePassword = function(status){\r\n\t\t$scope.havePassword = status;\r\n\t};\r\n}]);\r\n\r\n//Control de categorias\r\n\r\n/**\r\n * Categories Controller\r\n * Save the selected category into \"category\" hidden, in order to use it in the search\r\n */\r\napp.controller('CategoriesController',['$scope','$http',function($scope, $http)\r\n{\r\n\t/**\r\n\t * catSelected\r\n\t * Category var model\r\n\t */\r\n\t$scope.catSelected = {};\r\n\r\n\t/**\r\n\t * refine\r\n\t * assign the category info to form hidden named \"category\"\r\n\t */\r\n\t$scope.refine = function()\r\n\t{\r\n\t\treturn $scope.catSelected.id ? $scope.catSelected.id+'|'+$scope.catSelected.name :'';\r\n\t};\r\n\r\n\t/**\r\n\t * setCategorie\r\n\t * assign the category info to Category var model\r\n\t * @param {int} id category id\r\n\t * @param {string} cat category name\r\n\t */\r\n\t$scope.setCategorie = function(id, cat){\r\n\t\t$scope.catSelected.name = cat;\r\n\t\t$scope.catSelected.id = id;\r\n\t};\r\n}]);\r\n\r\n//Control for rate Angular UI Rate\r\napp.controller('RatingCtrl', function ($scope) {\r\n    $scope.max = 5;\r\n});\r\n//Control de WishList\r\napp.controller('WishListControllerModal', function($scope, $http, $rootScope,$uibModalInstance){\r\n    $scope.newList = {};\r\n\r\n    $scope.createList = function(productId){\r\n        if($scope.newList.description){\r\n            $http.post('/wishes/store', $scope.newList).\r\n                success(function(data, status) {\r\n                    if (data.success) {\r\n                        //$rootScope.allLists.push(data.newList);\r\n                        console.log(data);\r\n                        $uibModalInstance.close();\r\n                        if(productId){\r\n                        \twindow.location.replace('/products/'+productId);\r\n                        }else{\r\n                        \twindow.location.replace('/wishes/directory');\r\n                        }\r\n                    }else{\r\n                        console.log(data); //mensajes de error\r\n                    }\r\n                }).\r\n                error(function(data, status, headers, config) {\r\n                    $rootScope.allLists.pop();\r\n                    console.log(data);\r\n                });\r\n            console.log($scope.newList);\r\n        }else{\r\n            console.log($scope.newList);\r\n        }\r\n        //$uibModalInstance.close();\r\n    };\r\n});\r\n\r\n//Control de Feedback entre vendedor y cliente\r\napp.controller('CommentControllerModal', function($scope, $http, $rootScope,$uibModalInstance){\r\n    $scope.newComment = {};\r\n\r\n    $scope.commentOrder = function(order_id){\r\n        $scope.newComment.order_id = order_id;\r\n        if($scope.newComment.comment_text){\r\n            $http.post('/user/orders/storeComment', $scope.newComment).\r\n                success(function(data, status) {\r\n                    if (data.success) {\r\n                        console.log(data);\r\n                        $uibModalInstance.close();\r\n                        window.location.replace('/user/orders/show/'+data.order_id);\r\n                    }else{\r\n                        console.log(data); //mensajes de error\r\n                    }\r\n                }).\r\n                error(function(data, status, headers, config) {\r\n                    //$rootScope.allLists.pop();\r\n                    console.log(data);\r\n                });\r\n            console.log($scope.newComment);\r\n        }else{\r\n            console.log($scope.newComment);\r\n        }\r\n        $uibModalInstance.close();\r\n    };\r\n});\r\n\r\n\r\n/**\r\n * PassInfo\r\n * Services to pass a var between controllers\r\n */\r\napp.service('PassInfo', function ()\r\n{\r\n       \tvar property = '';\r\n\r\n        return {\r\n            getProperty: function ()\r\n            {\r\n                return property;\r\n            },\r\n\r\n            setProperty: function(value)\r\n            {\r\n                property = value;\r\n            }\r\n        };\r\n});\r\n\r\n//Control de Direcciones\r\napp.controller('AddressesControllerModal', function($scope, $http, $rootScope, $uibModalInstance, notify, $window, PassInfo){\r\n\r\n\t/**\r\n\t * auxCallBack\r\n\t * it is the scope bettwen address list and the modal. auxCallBack contains the callback url, so the controller\r\n\t * knows where to gos after process either a update or a insert\r\n\t * @type {[type]}\r\n\t */\r\n\tvar auxCallBack = PassInfo.getProperty();\r\n\r\n\t/**\r\n\t * _address\r\n\t * it is the model to be used either in the update or insert process\r\n\t * @type {Object}\r\n\t */\r\n\t$scope._address = {};\r\n\r\n\t/**\r\n\t * getCountries\r\n\t * this method retrieves the countries information from restcountries.eu\r\n\t * @return [json] countries list\r\n\t */\r\n\t$scope.getCountries = function()\r\n\t{\r\n\t\t$http.get('https://restcountries.eu/rest/v1/all')\r\n\t\t\t.success(function(data, status)\r\n\t\t\t{\r\n\t\t\t\t$scope.countries = data;\r\n\t\t\t});\r\n\t};\r\n\r\n\t$scope.getCountries();\r\n\r\n\t$scope.create = function()\r\n\t{\r\n\t\t$http.put('/user/address/store', $scope._address).\r\n\t\t\tsuccess(function(data, status)\r\n\t\t\t{\r\n\t\t\t\tif (data.success)\r\n\t\t\t\t{\r\n\t\t\t\t\t$uibModalInstance.close();\r\n\t\t\t\t\t$window.location.href = auxCallBack != '' ? auxCallBack : data.callback;\r\n\t\t\t\t}\r\n\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tnotify({ duration: 5000, messageTemplate:'<p>'+data.message+'</p>', classes: data.class });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\t$scope.update = function(){\r\n\r\n\t\t$http.put('/user/address/'+$scope._address.id, $scope._address).\r\n\r\n\t\t\tsuccess(function(data, status) {\r\n\r\n\t\t\t\tif (data.success)\r\n\t\t\t\t{\r\n\t\t\t\t\t$uibModalInstance.close();\r\n\t\t\t\t\t$window.location.href = auxCallBack != '' ? auxCallBack : data.callback;\r\n\t\t\t\t}\r\n\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tnotify({ duration: 5000, messageTemplate:'<p>'+data.message+'</p>', classes: data.class });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n});\r\n\r\napp.controller('getKeysVirtualProducts',function($scope,$http,data){\r\n    $scope.keys=[];\r\n    $scope.message='';\r\n    $scope.class='alert-danger';\r\n    $scope.show=false;\r\n    $scope.thisShow=true;\r\n    $http.get('/showAllKeys/'+data.data).success( function(data) {\r\n        if (data.message){\r\n            $scope.message=data.message;\r\n    \t\t$scope.show=true;\r\n        }else $scope.keys=data;\r\n    });\r\n    $scope.change=function(id){\r\n    \t$http.get('/deleteKey/'+id).success( function(data) {\r\n        \tif (data.message)\r\n\t        \t$scope.message=data.message;\r\n\t        else{\r\n\t        \t$scope.message=data.success;\r\n\t\t\t    $scope.class='alert-success';\r\n\t        }\r\n    \t\t$scope.show=true;\r\n    \t\t$scope.thisShow=true;\r\n\t    });\r\n    };\r\n});\r\napp.controller('getDetailsProductInCart',function($scope,$http,data){\r\n\t$scope.product=[];$scope.order=[];$scope.per=false;\r\n    $scope.virtual=false; $scope.message='';\r\n    $scope.class='alert-danger';\r\n    $scope.show=false;\r\n    $scope.thisShow=true;\r\n    $http.get('/showDetailsProductCart/'+data.data).success( function(data) {\r\n        if (data.message){\r\n            $scope.message=data.message;\r\n    \t\t$scope.show=true;\r\n        }else{\r\n        \t$scope.per=true;\r\n        \t$scope.product=data.product;\r\n        \t$scope.order=data.order;\r\n        \tif (data.virtual){\r\n        \t\t$scope.virtual=data.virtual;\r\n        \t}\r\n        }\r\n    });\r\n    var changeKey=function(email,action){\r\n\r\n    \tvar obj=false;\r\n    \tif (action=='all'){\r\n    \t\tobj={'email':email,'delete':true};\r\n    \t}\r\n    \telse if(action==1){\r\n    \t\tobj={'email':email,'increment':true};\r\n    \t}\r\n    \telse if(action==-1){\r\n    \t\tobj={'email':email,'decrement':true};\r\n    \t}\r\n\r\n    \tif (obj){\r\n\t    \t$http.post('/editKeyVirtualProductsOrders/'+data.data,obj).success(function(data) {\r\n\t    \t\tif (data.message){\r\n\t\t            $scope.message=data.message;\r\n\t\t    \t\t$scope.show=true;\r\n\t\t        }else{\r\n\t\t        \tif (data.all) document.getElementById(email).style.display='none';\r\n\t\t        \telse{\r\n\t\t        \t\tdocument.getElementById(email).children[0].children[0].innerHTML=data.num;\r\n\t\t        \t\tconsole.log(document.getElementById(email).children[0].children);\r\n\t\t        \t\t// document.querySelector(\"#\"+email).innerHTML=data.num;\r\n\t\t        \t}\r\n\t\t        }\r\n\t\t    });\r\n    \t}\r\n    };\r\n    $scope.increaseKey= function(email){ changeKey(email,1); };\r\n    $scope.decrementKey= function(email){ changeKey(email,-1); };\r\n    $scope.removeKey= function(email){ changeKey(email,'all'); };\r\n    $scope.change=function(id){\r\n    \t$http.get('/deleteKey/'+id).success( function(data) {\r\n        \tif (data.message)\r\n\t        \t$scope.message=data.message;\r\n\t        else{\r\n\t        \t$scope.message=data.success;\r\n\t\t\t    $scope.class='alert-success';\r\n\t        }\r\n    \t\t$scope.show=true;\r\n    \t\t$scope.thisShow=true;\r\n\t    });\r\n    };\r\n});\r\napp.controller('seeKeysPurchased',function($scope,$http,data){\r\n\t$scope.info=[];\r\n\t$scope.detail=[];\r\n    $http.get('/user/showKeyVirtualProductPurchased/'+data.data+'/'+data.order).success( function(data) {\r\n        console.log(data);\r\n        if (data.message){\r\n            $scope.message=data.message;\r\n    \t\t$scope.show=true;\r\n        }else{\r\n        \t$scope.info=data.info;\r\n        \t$scope.details=data.users;\r\n        }\r\n    });\r\n});\r\n\r\n\r\n/**\r\n * Users points push notification\r\n */\r\napp.controller('PushUsersPoints', ['$scope', '$http', '$interval', function($scope, $http, $interval)\r\n{\r\n\t$scope.points = '';\r\n\t$scope.pusher = function()\r\n\t{\r\n\t\t$http.get('getPoints', { ignoreLoadingBar: true } ).success(function(data)\r\n        {\r\n        \tif (data.points) {\r\n        \t\t$scope.points = data.points;\r\n\r\n        \t}\r\n        });\r\n\t};\r\n\r\n\t$interval(function(){ $scope.pusher(); }, 60000);\r\n\r\n}]);\r\n\r\napp.controller('ProductBox', ['$scope', '$window', function($scope, $window)\r\n{\r\n\r\n\t$scope.goTo = function (url)\r\n    {\r\n        $window.location.href = url;\r\n    };\r\n\r\n    $scope.submit = function(id) {\r\n        $(id).submit();\r\n    };\r\n\r\n}]);\r\n\r\napp.controller('DataPickerCtrl', function($scope)\r\n{\r\n  \t$scope.open = function($event)\r\n  \t{\r\n    \t$scope.status.opened = true;\r\n  \t};\r\n\r\n\t$scope.status =\r\n\t{\r\n\t\topened: false\r\n\t};\r\n\r\n\t$scope.open2 = function($event)\r\n  \t{\r\n    \t$scope.status2.opened = true;\r\n  \t};\r\n\r\n\t$scope.status2 =\r\n\t{\r\n\t\topened: false\r\n\t};\r\n});\r\n\r\n})(); //modules\r\n","   $('#zoom_01').elevateZoom({\r\n    zoomType: \"inner\",\r\ncursor: \"crosshair\",\r\nzoomWindowFadeIn: 500,\r\nzoomWindowFadeOut: 750\r\n   }); "]}